# Config file for automatic testing at travis-ci.org
sudo: required  # http://docs.travis-ci.com/user/migrating-from-legacy/
language: python
services:
  - docker
before_install:
  - pip install awscli
  - sudo apt-get install dos2unix -y
  - export PATH=$PATH:$HOME/.local/bin
  - dos2unix -R ./*

script:
  - docker build -t $DOCKER_REPO .

deploy:
  provider: script
  script: bash deploy/ecr.sh
  on:
    branch: master

notifications:
  email:
    recipients:
      - support@shortto.com
    on:
      branch: master
